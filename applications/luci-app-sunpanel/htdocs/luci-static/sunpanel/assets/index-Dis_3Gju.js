import{bG as g,j as w,bH as S,bx as B,bI as I,c as z,r as V,H as j,b2 as i,b3 as l,bc as s,b7 as n,ba as e,b8 as a,b9 as o,bj as t,bb as c,b6 as u,bd as f,as as H,af as m,bS as P}from "./index-Cr6VSFOe.js";import{a as k}from "./headers-UeR2h-d_.js";import{N as M}from "./Alert-BHC7xqF2.js";import{a as _}from "./index-B9C2E4-e.js";import{c as b}from "./index-BfqqEllV.js";import"./index-DEZ9xjST.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index.vue_vue_type_script_setup_true_lang-GZDTfTwy.js";function E(){return g({url:"/openApi/refreshToken"})}function F(){return g({url:"/openApi/deleteToken"})}function G(){return g({url:"/openApi/getTokenStatusInfo"})}const L={class:"bg-slate-200 dark:bg-zinc-900 p-2 h-full"},O=["href"],R={class:"mt-5"},U={key:0},W={class:"text-xs text-slate-400"},q={key:1},J={class:"flex justify-center"},se=w({__name:"index",setup(K){const h=S(),T=B(),v=I(),x=z(()=>{const r="http://links.sun-panel.top/openApiDoc_";return v.language==="zh-CN"?`${r}zh_cn`:`${r}en`}),p=V({status:!1,token:""}),A="/openapi/v1";function C(){return`${location.protocol}//${location.hostname}${location.port===""?"":`:${location.port}`}`}async function d(){try{const{data:r}=await G();p.value=r}catch{}}function N(){T.warning({title:t("common.warning"),content:t("apps.openApi.updateTokenDialogText"),positiveText:t("common.confirm"),negativeText:t("common.cancel"),onPositiveClick:()=>{y()}})}function D(){T.warning({title:t("common.warning"),content:t("apps.openApi.updateTokenDialogText"),positiveText:t("common.confirm"),negativeText:t("common.cancel"),onPositiveClick:()=>{$()}})}async function y(){try{await E(),d()}catch{h.error(t("common.failed"))}}async function $(){try{await F(),d()}catch{h.error(t("common.failed"))}}return j(()=>{d()}),(r, Q)=>(i(),l("div",L,[s(e(P),{style:{"border-radius":"10px"},size:"small"},{default:n(()=>[s(e(M),{type:"info",bordered:!1},{default:n(()=>[a(o(e(t)("apps.openApi.alertText")),1),c("a",{href:e(x),target:"_blank",class:"text-[blue]"},o(e(t)("apps.openApi.docTitle")),9,O)]),_:1}),c("div",R,[c("div",null,[s(e(k),null,{default:n(()=>[a(o(e(t)("apps.openApi.state")),1)]),_:1}),p.value.status?(i(),u(e(_),{key:0,type:"success",bordered:!1},{default:n(()=>[a(o(e(t)("apps.openApi.enable")),1)]),_:1})):(i(),u(e(_),{key:1,bordered:!1},{default:n(()=>[a(o(e(t)("apps.openApi.deactivate")),1)]),_:1})),s(e(b))]),p.value.status?(i(),l("div",U,[s(e(k),null,{default:n(()=>[a(o(e(t)("apps.openApi.apiUrl"))+" ",1),c("span",W,o(e(t)("apps.openApi.autoDomainWarning")),1)]),_:1}),a(" "+o(C())+o(A)+" ",1),s(e(b))])):f("",!0),p.value.status?(i(),l("div",q,[s(e(k),null,{default:n(()=>[a(" Token ")]),_:1}),s(e(_),{bordered:!1},{default:n(()=>[a(o(p.value.token),1)]),_:1}),s(e(b))])):f("",!0)]),c("div",J,[p.value.status?(i(),l(H,{key:0},[p.value.status?(i(),u(e(m),{key:0,type:"info",strong:"",secondary:"",onClick:N},{default:n(()=>[a(o(e(t)("apps.openApi.refreshToken")),1)]),_:1})):f("",!0),s(e(m),{type:"error",strong:"",secondary:"",style:{"margin-left":"4px"},onClick:D},{default:n(()=>[a(o(e(t)("apps.openApi.stopOpenApi")),1)]),_:1})],64)):(i(),u(e(m),{key:1,type:"success",onClick:y},{default:n(()=>[a(o(e(t)("apps.openApi.enable")),1)]),_:1}))])]),_:1})]))}});export{se as default};
