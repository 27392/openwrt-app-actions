import{a as J,t as K,c as F,N as M,_ as V,s as Q,v as X,w as Y,o as Z,q as ee,h as le}from "./index-BfqqEllV.js";import{S as k}from "./index-DEZ9xjST.js";import{N as ae,_ as te}from "./index.vue_vue_type_script_setup_true_lang-GZDTfTwy.js";import{j as oe,r as g,bH as se,bx as ne,bj as n,bm as S,H as ie,w as ue,b2 as d,b3 as w,bc as a,b7 as s,bb as u,ba as e,af as p,b8 as m,b9 as r,b6 as b,bS as C,bd as N,bn as H,b5 as re,as as de,bz as me,bC as T}from "./index-Cr6VSFOe.js";import{g as ce,b as v,N as L,e as I,d as pe,k as A}from "./index-B9C2E4-e.js";import{_ as ve}from "./_plugin-vue_export-helper-DlAUqK2U.js";const fe={class:"p-2"},ye=["onClick"],ge={class:"mr-[10px]"},be={class:"ml-auto"},xe={class:"ml-[10px]"},Se=oe({__name:"index",setup(he){const B=J(),z=g(null),y=se(),E=ne(),c=g(!1),D=le(),h=g(!1),x={title:"",cardStyle:A},P=[{label:n("apps.baseSettings.detailIcon"),value:S.info},{label:n("apps.baseSettings.smallIcon"),value:S.icon}],l=g({show:!1,editStatus:1,model:x,rules:{title:[{required:!0,trigger:"blur",message:n("form.required")}]}}),f=g([]);function q(){l.value.show=!l.value.show}function U(i){l.value.show=!0,l.value.model=i||x,l.value.editStatus=2,l.value.model.cardStyle.textColor===""&&(l.value.model.cardStyle.textColor=A.textColor)}function R(){c.value=!0}function j(){const i=[];for(let t=0; t<f.value.length; t++){const o=f.value[t];i.push({id:o.id,sort:t+1})}X(i).then(({code:t,msg:o})=>{y.success(n("common.saveSuccess")),c.value=!1,D.triggerUpdate()}).catch(()=>{y.error(n("common.saveFail"))})}function W(i){E.warning({title:n("common.warning"),content:n("apps.itemGroupManage.deleteWarnText",{name:i.title}),positiveText:n("common.confirm"),negativeText:n("common.cancel"),onPositiveClick:()=>{i.id&&Y([i.id]).then(({code:t,msg:o})=>{t!==0?y.error(n("common.deleteFail")):_()}).catch(t=>{T(t)})}})}function O(){var i;(i=z.value)==null||i.validate(t=>{t?console.log(t):Z(l.value.model).then(({code:o,msg:$})=>{o!==0&&y.error(n("common.saveFail")),_(),D.triggerUpdate(),l.value.show=!1,l.value.model={...x}}).catch(o=>{o.code===-2?y.error(`${n("common.saveFail")}: ${n("iconItem.onlyNameExisted")}`):T(o)})})}async function _(){h.value=!0,await ee().then(({data:i})=>{f.value=i.list}),h.value=!1}return ie(()=>{_()}),ue(()=>l.value.show, i=>{i||(l.value.model={...x})}),(i, t)=>(d(),w("div",fe,[a(e(C),{style:{"border-radius":"10px","margin-bottom":"10px"},size:"small"},{default:s(()=>[u("div",null,[a(e(p),{type:"success",size:"small",style:{"margin-right":"10px"},onClick:q},{default:s(()=>[m(r(i.$t("common.add")),1)]),_:1}),c.value?(d(),b(e(p),{key:1,type:"warning",size:"small",onClick:j},{default:s(()=>[m(r(i.$t("common.saveSort")),1)]),_:1})):(d(),b(e(p),{key:0,size:"small",onClick:R},{default:s(()=>[m(r(i.$t("common.sort")),1)]),_:1}))])]),_:1}),a(e(C),{style:{"border-radius":"10px"},size:"small"},{default:s(()=>[h.value?(d(),b(e(ae),{key:0})):N("",!0),u("div",{class:H(["w-full mt-[20px] rounded-xl my-20 pt-[5px]",c.value?"border border-dashed":""])},[a(e(K),{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]= o=>f.value=o),"item-key":"sort",animation:300,style:re({padding:c.value?"20px":"5px"}),disabled:!c.value},{default:s(()=>[(d(!0),w(de,null,me(f.value,(o, $)=>(d(),w("div",{key:$,class:"w-full"},[a(e(C),{size:"small",style:{"border-radius":"10px","margin-bottom":"10px"},class:"card"},{default:s(()=>[u("div",{class:H(["flex",c.value?"cursor-move":""])},[u("div",{class:"flex items-center cursor-pointer",onClick: G=>U(o)},[u("span",ge,[a(e(k),{class:"text-[20px]",icon:"material-symbols:ad-group-outline-rounded"})]),u("span",null,r(o.title),1)],8,ye),u("div",be,[u("span",null,[a(e(p),{strong:"",secondary:"",type:"success",size:"small",onClick: G=>U(o)},{icon:s(()=>[a(e(k),{icon:"basil:edit-solid"})]),_:2},1032,["onClick"])]),u("span",xe,[a(e(p),{strong:"",secondary:"",type:"error",size:"small",class:"ml-[10px]",onClick: G=>W(o)},{icon:s(()=>[a(e(k),{icon:"material-symbols:delete"})]),_:2},1032,["onClick"])])])],2)]),_:2},1024)]))),128))]),_:1},8,["modelValue","style","disabled"])],2)]),_:1}),a(e(te),{show:l.value.show,"onUpdate:show":t[8]||(t[8]= o=>l.value.show=o),size:"small",type:"small",title:l.value.editStatus===1?e(n)("common.add"):e(n)("common.edit"),style:{width:"400px"}},{footer:s(()=>[a(e(p),{type:"success",size:"small",class:"float-right",onClick:O},{default:s(()=>[m(r(i.$t("common.save")),1)]),_:1})]),default:s(()=>[a(e(ce),{ref_key:"formRef",ref:z,model:l.value.model,size:"small",rules:l.value.rules},{default:s(()=>[a(e(v),{path:"title",label:i.$t("apps.itemGroupManage.groupName")},{default:s(()=>[a(e(L),{value:l.value.model.title,"onUpdate:value":t[1]||(t[1]= o=>l.value.model.title=o),type:"text",maxlength:20,"show-count":""},null,8,["value"])]),_:1},8,["label"]),a(e(v),{label:e(n)("apps.itemGroupManage.publicVisitHide")},{default:s(()=>[a(e(I),{value:l.value.model.publicVisitHide,"onUpdate:value":t[2]||(t[2]= o=>l.value.model.publicVisitHide=o)},null,8,["value"])]),_:1},8,["label"]),a(e(F),{class:"!my-2"}),a(e(v),{label:e(n)("apps.itemGroupManage.cardStyle")},{default:s(()=>[a(e(pe),{value:l.value.model.cardStyle.style,"onUpdate:value":t[3]||(t[3]= o=>l.value.model.cardStyle.style=o),options:P},null,8,["value"])]),_:1},8,["label"]),l.value.model.cardStyle.style===e(S).info?(d(),b(e(v),{key:0,label:e(n)("apps.baseSettings.hideDescription")},{default:s(()=>[a(e(I),{value:l.value.model.cardStyle.textInfoHideDescription,"onUpdate:value":t[4]||(t[4]= o=>l.value.model.cardStyle.textInfoHideDescription=o)},null,8,["value"])]),_:1},8,["label"])):N("",!0),l.value.model.cardStyle.style===e(S).icon?(d(),b(e(v),{key:1,label:e(n)("apps.baseSettings.hideTitle")},{default:s(()=>[a(e(I),{value:l.value.model.cardStyle.textIconHideTitle,"onUpdate:value":t[5]||(t[5]= o=>l.value.model.cardStyle.textIconHideTitle=o)},null,8,["value"])]),_:1},8,["label"])):N("",!0),a(e(v),null,{label:s(()=>[a(e(M),{align:"center"},{default:s(()=>[m(r(e(n)("common.textColor"))+" ",1),a(e(V),{content:e(n)("apps.itemGroupManage.textAutoColor")},null,8,["content"])]),_:1})]),default:s(()=>[a(e(Q),{value:l.value.model.cardStyle.textColor,"onUpdate:value":t[6]||(t[6]= o=>l.value.model.cardStyle.textColor=o),"show-alpha":!1,size:"small",modes:["hex"],swatches:["#000000","#ffffff","#18A058","#2080F0","#F0A020"]},null,8,["value"])]),_:1}),a(e(F),{class:"!my-2"}),a(e(v),{path:"onlyName"},{label:s(()=>[a(e(M),{align:"center"},{default:s(()=>[m(r(i.$t("common.onlyName"))+" ",1),a(e(V),null,{default:s(()=>[m(r(e(n)("apps.itemGroupManage.onlyNameDescribe"))+" ",1),a(e(p),{text:"",tag:"a",href:e(B).linkWithLang("only_name_beautify_doc"),target:"_blank",type:"primary"},{default:s(()=>[m(r(e(n)("common.lookDoc")),1)]),_:1},8,["href"])]),_:1})]),_:1})]),default:s(()=>[a(e(L),{value:l.value.model.onlyName,"onUpdate:value":t[7]||(t[7]= o=>l.value.model.onlyName=o),type:"text","show-count":"",maxlength:20},null,8,["value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","title"])]))}}),ze=ve(Se,[["__scopeId","data-v-c642e89f"]]);export{ze as default};
