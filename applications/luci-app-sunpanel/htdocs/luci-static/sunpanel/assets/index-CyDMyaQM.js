import{j as M,bv as q,bI as D,bH as E,r as m,bj as d,b2 as y,b3 as P,bc as a,b7 as l,bb as r,b9 as u,b8 as i,ba as e,af as w,bS as U,dd as T,de as j}from "./index-Cr6VSFOe.js";import{N as h,d as N,l as O,g as H,b as k}from "./index-B9C2E4-e.js";import{_ as G}from "./index.vue_vue_type_script_setup_true_lang-GZDTfTwy.js";import{c as J,N as z,_ as C,B as K}from "./index-BfqqEllV.js";import{w as Q}from "./index-DEZ9xjST.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"bg-slate-200 dark:bg-zinc-900 p-2 h-full mb-10 overflow-auto"},X={class:"text-slate-500 font-bold"},Y={class:"text-slate-500 font-bold"},Z={class:"mt-[10px]"},ee={class:"text-slate-500 font-bold"},se={key:0},ae={key:1,class:"flex items-center"},oe={class:"max-w-[150px]"},te={class:"text-slate-500 font-bold"},le={class:"text-slate-500 font-bold"},ne={class:"max-w-[200px]"},re={class:"mt-[10px]"},de={class:"text-slate-500 font-bold"},ue={class:"max-w-[200px]"},ie={class:"text-slate-500 font-bold"},me={class:"float-right"},be=M({__name:"index",setup(fe){var S;const b=q(),p=D(),c=E(),I=m(p.language),_=m(p.theme),$=m(((S=b.userInfo)==null?void 0:S.name)||""),v=m(!1),x=m(null),L=[{label:d("apps.userInfo.themeStyle.dark"),key:"dark",value:"dark"},{label:d("apps.userInfo.themeStyle.light"),key:"light",value:"light"},{label:d("apps.userInfo.themeStyle.auto"),key:"Auto",value:"auto"}],t=m({show:!1,loading:!1,form:{password:"",oldPassword:"",confirmPassword:""}}),V={oldPassword:{required:!0,trigger:"blur",min:6,max:20,message:d("adminSettingUsers.formRules.passwordLimit")},password:{required:!0,trigger:"blur",min:6,max:20,message:d("adminSettingUsers.formRules.passwordLimit")},confirmPassword:{required:!0,trigger:"blur",min:6,max:20,message:d("adminSettingUsers.formRules.passwordLimit")}};function R(){T($.value).then(({code:s,msg:o})=>{Q(),v.value=!1}).catch(s=>{c.error(`${d("common.editFail")}:${s.msg}`)})}function A(s){var o;s.preventDefault(),(o=x.value)==null||o.validate(n=>{if(n){console.log(n);return}if(t.value.form.password!==t.value.form.confirmPassword){c.error(d("settingUserInfo.confirmPasswordInconsistentMsg"));return}t.value.loading=!0,j(t.value.form.oldPassword,t.value.form.password).then(({code:f,msg:g})=>{t.value.show=!1,c.success(d("common.success"))}).finally(()=>{t.value.loading=!1}).catch(f=>{c.error(`${d("common.serverError")}:${f.msg}`)})})}function B(s){I.value=s,p.setLanguage(s),location.reload()}function F(s){_.value=s,p.setTheme(s)}return(s, o)=>(y(),P("div",W,[a(e(U),{style:{"border-radius":"10px"},size:"small"},{header:l(()=>[r("div",X,u(s.$t("apps.userInfo.currentAccount")),1)]),default:l(()=>{var n,f;return[r("div",null,[r("div",Y,u(s.$t("common.username")),1),i(" "+u((n=e(b).userInfo)==null?void 0:n.username),1)]),r("div",Z,[r("div",ee,u(s.$t("common.nikeName")),1),v.value?(y(),P("div",ae,[r("div",oe,[a(e(h),{value:$.value,"onUpdate:value":o[1]||(o[1]= g=>$.value=g),type:"text",placeholder:s.$t("common.inputPlaceholder")},null,8,["value","placeholder"])]),a(e(w),{size:"small",quaternary:"",type:"success",onClick:R},{default:l(()=>[i(u(s.$t("common.save")),1)]),_:1})])):(y(),P("div",se,[i(u((f=e(b).userInfo)==null?void 0:f.name)+" ",1),a(e(w),{size:"small",text:"",type:"success",onClick:o[0]||(o[0]= g=>v.value=!v.value)},{default:l(()=>[i(u(s.$t("common.edit")),1)]),_:1})]))]),a(e(J),{style:{margin:"10px 0"},dashed:""}),r("div",null,[a(e(w),{size:"small",text:"",type:"success",onClick:o[2]||(o[2]= g=>t.value.show=!t.value.show)},{default:l(()=>[i(u(s.$t("settingUserInfo.updatePassword")),1)]),_:1})])]}),_:1}),a(e(U),{style:{"border-radius":"10px"},class:"my-[10px]",size:"small"},{header:l(()=>[r("div",te,[a(e(z),{align:"center"},{default:l(()=>[i(u(s.$t("common.setting"))+" ",1),a(e(C),{content:e(d)("apps.userInfo.settingSaveLocal")},null,8,["content"])]),_:1})])]),default:l(()=>[r("div",null,[r("div",le,u(s.$t("common.language")),1),r("div",ne,[a(e(N),{value:I.value,"onUpdate:value":o[3]||(o[3]= n=>I.value=n),size:"small",options:e(O),onUpdateValue:B},null,8,["value","options"])])]),r("div",re,[r("div",de,u(s.$t("apps.userInfo.theme")),1),r("div",ue,[a(e(N),{value:_.value,"onUpdate:value":o[4]||(o[4]= n=>_.value=n),size:"small",options:L,onUpdateValue:F},null,8,["value"])])])]),_:1}),a(e(U),{style:{"border-radius":"10px"},class:"mt-[10px]",size:"small"},{header:l(()=>[r("div",ie,[a(e(z),{align:"center"},{default:l(()=>[i(u(e(d)("deskModule.accountSwitcher.loggedInAccount"))+" ",1),a(e(C),{content:e(d)("apps.userInfo.settingSaveLocal")},null,8,["content"])]),_:1})])]),default:l(()=>[r("div",null,[a(e(K))])]),_:1}),a(e(G),{show:t.value.show,"onUpdate:show":o[8]||(o[8]= n=>t.value.show=n),size:"small",preset:"card",style:{width:"400px"},title:s.$t("settingUserInfo.updatePassword")},{footer:l(()=>[r("div",me,[a(e(w),{type:"success",size:"small",loading:t.value.loading,onClick:A},{default:l(()=>[i(u(s.$t("common.save")),1)]),_:1},8,["loading"])])]),default:l(()=>[a(e(H),{ref_key:"formRef",ref:x,model:t.value.form,rules:V},{default:l(()=>[a(e(k),{path:"oldPassword",label:s.$t("settingUserInfo.oldPassword")},{default:l(()=>[a(e(h),{value:t.value.form.oldPassword,"onUpdate:value":o[5]||(o[5]= n=>t.value.form.oldPassword=n),maxlength:20,type:"password",placeholder:s.$t("settingUserInfo.oldPassword")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(e(k),{path:"password",label:s.$t("settingUserInfo.newPassword")},{default:l(()=>[a(e(h),{value:t.value.form.password,"onUpdate:value":o[6]||(o[6]= n=>t.value.form.password=n),maxlength:20,type:"password",placeholder:s.$t("settingUserInfo.newPassword")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(e(k),{path:"confirmPassword",label:s.$t("settingUserInfo.confirmPassword")},{default:l(()=>[a(e(h),{value:t.value.form.confirmPassword,"onUpdate:value":o[7]||(o[7]= n=>t.value.form.confirmPassword=n),maxlength:20,type:"password",placeholder:s.$t("settingUserInfo.confirmPassword")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","title"])]))}});export{be as default};
