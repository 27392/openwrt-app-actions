import{bG as N,j as B,r as y,bH as L,bx as G,bw as U,H as V,b2 as u,b3 as _,bc as a,b7 as l,ba as t,b8 as w,b9 as n,bd as W,bb as s,b6 as $,as as D,bz as H,bS as C,af as g,bj as i,d9 as P}from "./index-Cr6VSFOe.js";import{k as E,S as v,F,m as O,G as A}from "./index-DEZ9xjST.js";import{N as q,a as J,_ as K}from "./index.vue_vue_type_script_setup_true_lang-GZDTfTwy.js";import{N as Q}from "./Alert-BHC7xqF2.js";import{N as R}from "./ButtonGroup-aSgwB34R.js";import{_ as X}from "./_plugin-vue_export-helper-DlAUqK2U.js";function Y(){return N({url:"/file/getList"})}function Z(b){return N({url:"/file/deletes",data:{ids:b}})}const ee={class:"h-full overflow-auto p-2"},te={key:0,class:"w-20 h-[100px] mt-10"},se={class:"flex justify-center mt-2"},ae={key:0,class:"flex"},oe={class:"img-group"},le={class:"img-card transparent-grid dark:brightness-75"},ie={class:"text-xs"},ne={class:"flex justify-center mt-[10px]"},re={class:"mb-2"},ce={class:"text-slate-500"},de={class:"text-xs"},pe={class:"mb-2"},ue={class:"text-slate-500"},fe={class:"text-xs"},me={class:"mb-2"},_e={class:"text-slate-500"},ge={class:"text-xs"},ve=B({__name:"index",setup(b){const h=y([]),c=L(),M=G(),x=U(),f=y(!1),d=y({show:!1,title:"",fileInfo:null});async function k(){f.value=!0;const{data:e}=await Y().finally(()=>{f.value=!1});h.value=e.list}async function I(e){await A(e)?(c.success(i("apps.uploadsFileManager.copySuccess")),window.location.protocol!=="https:"&&c.warning(i("common.noHttpsWarning"))):c.error(i("apps.uploadsFileManager.copyFailed"))}function S(e){M.warning({title:i("common.warning"),content:i("apps.uploadsFileManager.deleteWarningText"),positiveText:i("common.confirm"),negativeText:i("common.cancel"),onPositiveClick:()=>{T(e)}})}async function T(e){try{const{code:r,msg:o}=await Z([e]);r===0?(k(),c.success(i("common.success"))):c.error(`${i("common.failed")}:${o}`)}catch{c.error(i("common.failed"))}}function z(e){d.value.fileInfo=e,d.value.show=!0}function j(e){x.panelConfig.backgroundImageSrc=e,P({panel:x.panelConfig}).catch(r=>{c.error(`${i("common.failed")}:${r.msg}`)})}return V(()=>{k()}),(e, r)=>(u(),_("div",ee,[a(t(C),{style:{"border-radius":"10px"},size:"small"},{default:l(()=>[a(t(Q),{type:"info",bordered:!1},{default:l(()=>[w(n(e.$t("apps.uploadsFileManager.alertText")),1)]),_:1}),f.value?(u(),_("div",te,[a(t(q),{description:"loading"})])):W("",!0),s("div",se,[h.value.length===0&&!f.value?(u(),_("div",ae,n(e.$t("apps.uploadsFileManager.nothingText")),1)):(u(),$(t(O),{key:1},{default:l(()=>[s("div",oe,[(u(!0),_(D,null,H(h.value,(o, m)=>(u(),$(t(C),{key:m,size:"small",style:{"border-radius":"5px"},bordered:!0,hoverable:""},{cover:l(()=>[s("div",le,[a(t(E),{lazy:"",style:{"object-fit":"contain",height:"100%"},src:o.src},null,8,["src"])])]),footer:l(()=>[s("span",ie,[a(t(J),null,{default:l(()=>[w(n(o.fileName),1)]),_:2},1024)]),s("div",ne,[a(t(R),null,{default:l(()=>[a(t(g),{size:"tiny",tertiary:"",style:{cursor:"pointer"},title:e.$t("apps.uploadsFileManager.copyLink"),onClick: p=>I(o.src)},{icon:l(()=>[a(t(v),{icon:"ion-copy"})]),_:2},1032,["title","onClick"]),a(t(g),{size:"tiny",tertiary:"",style:{cursor:"pointer"},title:t(F)(o.createTime),onClick: p=>z(o)},{icon:l(()=>[a(t(v),{icon:"mdi-information-box-outline"})]),_:2},1032,["title","onClick"]),a(t(g),{size:"tiny",tertiary:"",style:{cursor:"pointer"},title:e.$t("apps.uploadsFileManager.setWallpaper"),onClick: p=>j(o.src)},{icon:l(()=>[a(t(v),{icon:"lucide:wallpaper"})]),_:2},1032,["title","onClick"]),a(t(g),{size:"tiny",tertiary:"",type:"error",style:{cursor:"pointer"},title:e.$t("common.delete"),onClick: p=>S(o.id)},{icon:l(()=>[a(t(v),{icon:"material-symbols-delete"})]),_:2},1032,["title","onClick"])]),_:2},1024)])]),_:2},1024))),128))])]),_:1}))])]),_:1}),a(t(K),{show:d.value.show,"onUpdate:show":r[0]||(r[0]= o=>d.value.show=o),style:{"max-width":"300px"},size:"small",title:e.$t("apps.uploadsFileManager.infoTitle")},{default:l(()=>{var o,m,p;return[s("div",null,[s("div",null,[s("div",re,[s("span",ce,n(e.$t("apps.uploadsFileManager.fileName")),1),s("div",de,n((o=d.value.fileInfo)==null?void 0:o.fileName),1)]),s("div",pe,[s("span",ue,n(e.$t("apps.uploadsFileManager.path")),1),s("div",fe,n((m=d.value.fileInfo)==null?void 0:m.src),1)]),s("div",me,[s("span",_e,n(e.$t("apps.uploadsFileManager.uploadTime")),1),s("div",ge,n(t(F)((p=d.value.fileInfo)==null?void 0:p.createTime)),1)])])])]}),_:1},8,["show","title"])]))}}),he=X(ve,[["__scopeId","data-v-43f060cf"]]),Ce=Object.freeze(Object.defineProperty({__proto__:null,default:he},Symbol.toStringTag,{value:"Module"}));export{he as U,Y as g,Ce as i};
